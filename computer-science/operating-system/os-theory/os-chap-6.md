# 프로세스

> 이 글은 유튜브 [HPC Lab. KOREATECH](https://www.youtube.com/channel/UCHvXywxOtwLedY5OX-Teg5w) 채널의 운영체제 강의를 수강하며 정리한 글입니다. 글에 포함된 내용 및 사진의 저작권은 [HPC Lab. KOREATECH](https://www.youtube.com/channel/UCHvXywxOtwLedY5OX-Teg5w) 채널에게 있으며 요청에 의해 언제든지 내려갈 수 있습니다.

다중 프로그래밍 시스템에서는 여러 개의 프로세스들이 존재하며 각 프로세스들은 서로 독립적으로 동작한다. 하지만 독립된 프로세스들이 *동일한 데이터를 동시에 참조*(쓰기 작업이 있을 시)하고 있다면 문제가 발생할 수 있다. 이런 문제를 해결하기 위해서는 동일한 데이터를 동시에 참고하고 있는 프로세스들간의 **대화**가 있어야 하며 이 과정을 **프로세스 동기화**라고 한다.

이 장을 학습하기 전 주요 단어에 대해 알고가자.

* 공유 데이터(Shared data) : 여러 프로세스들이 공유하는 데이터
* 임계 영역(Critical section) : 공유 데이터를 접근하는 코드 영역(code segment)
* 상호배재(Mutual exclusion) : 둘 이상의 프로세스가 동시에 *critical section에 진입*하는 것을 막는 것

## 임계 영역

![](https://i.imgur.com/JVad7md.png)

임계 영역은 여러 프로세스가 공유 데이터를 접근하는 영역을 뜻한다. 위 그림처럼 두 프로세스가 공유하는 sdata에 각각 1씩 더한다면 메모리에는 최종적으로 2가 저장될거라 생각할 수 있다. 하지만 우리 프로그램을 개발하고 최종적으로 얻는  기계어 명령은 *원자성(Atomicity)*와 *Indivisible(분리불가능)*이란 특성으로 <u>한 기계어가 실행 도중엔 인터럽트를 받지 않는 특징</u>을 가진다. 따라서 두 프로세스에서 동시에 작업이 이뤄진 경우 각 명령어가 수행되며 sdata에 데이터를 읽어오는 명령행을 수행하는 시점에 따라서 메모리에 저장되는 결과는 달라질 수 있다.

## 상호배재

임계 영역에서 두 프로세스가 동시에 공유 메모리를 사용하면 생길 수 있는 문제를 알아봤다. 임계 영역에서 발생하는 문제의 핵심은 두 프로세스가 ***동시에*** 같은 메모리를 사용하기 때문이다. 따라 임계 영역의 진입을 제어한다면 병렬성을 유지하면서 안전한 프로그램을 작성할 수 있을것이다.

상호배재를 구현하기 위해선 다음과 같은 기본 연산과 요구 조건이 필요하다.

* enterCS primitive
  * 임계 영역 진입 전 검사
  * 다른 프로세스가 임계 영역 안에 있는지 검사
* exitCS primitive
  * 임계 영역을 벗어날 때의 후처리 과정
  * 임계 영역을 벗어남을 시스템이 알림

다음은 상호배재가 지켜야할 요구조건이다.

* 상호배재(Mutual exclusion)
  * 임계영역에 프로세스가 있으면, *다른 프로세스의 진입을 금지*.
* 진행(Progress)
  * 임계영역에 있는 프로세스 외에는, *다른 프로세스가 임계영역에 진입하는 것을 방해하면 안됨*
* 한정대기(Bounded waiting)
  * 프로세스의 임계영역 *진입은 유한시간 내에 허용*되어야 함

